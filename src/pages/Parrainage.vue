<template>
  <div>
    <!-- Hero Section -->
    <section class="text-center mb-16 bg-gradient-to-br from-amber-50 to-white px-4 py-12 mt-24">
      <h1 class="text-4xl md:text-5xl font-extrabold text-[#090e15] mb-4 tracking-tight">Parrainage</h1>
      <p class="text-xl text-gray-700 max-w-3xl mx-auto mb-6">
        Changez la vie d'un enfant en devenant parrain ou marraine. Un engagement personnel et durable.
      </p>
      <div class="w-24 h-1 bg-amber-400 mx-auto rounded-full"></div>
    </section>

    <!-- Why Sponsor Section -->
    <section class="max-w-7xl mx-auto px-4 mb-20">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-12">
        <!-- Why -->
        <div class="space-y-8">
          <div>
            <h2 class="text-3xl font-bold text-[#090e15] mb-6">Pourquoi Parrainer ?</h2>
            <div class="space-y-4">
              <div class="flex items-start gap-4 p-4 bg-amber-50 rounded-lg hover:bg-amber-100 transition">
                <div class="flex-shrink-0">
                  <i class="fas fa-graduation-cap text-2xl text-amber-600 mt-1"></i>
                </div>
                <div>
                  <h3 class="font-bold text-[#090e15] mb-1">Accès à l'école</h3>
                  <p class="text-gray-700 text-sm">Permettre à un enfant d'accéder à l'école et à des soins de santé</p>
                </div>
              </div>
              <div class="flex items-start gap-4 p-4 bg-amber-50 rounded-lg hover:bg-amber-100 transition">
                <div class="flex-shrink-0">
                  <i class="fas fa-heart text-2xl text-amber-600 mt-1"></i>
                </div>
                <div>
                  <h3 class="font-bold text-[#090e15] mb-1">Accompagnement personnalisé</h3>
                  <p class="text-gray-700 text-sm">Offrir un accompagnement éducatif et social personnalisé</p>
                </div>
              </div>
              <div class="flex items-start gap-4 p-4 bg-amber-50 rounded-lg hover:bg-amber-100 transition">
                <div class="flex-shrink-0">
                  <i class="fas fa-handshake text-2xl text-amber-600 mt-1"></i>
                </div>
                <div>
                  <h3 class="font-bold text-[#090e15] mb-1">Lien solidaire durable</h3>
                  <p class="text-gray-700 text-sm">Créer un lien solidaire et humain durable</p>
                </div>
              </div>
              <div class="flex items-start gap-4 p-4 bg-amber-50 rounded-lg hover:bg-amber-100 transition">
                <div class="flex-shrink-0">
                  <i class="fas fa-globe text-2xl text-amber-600 mt-1"></i>
                </div>
                <div>
                  <h3 class="font-bold text-[#090e15] mb-1">Impact communautaire</h3>
                  <p class="text-gray-700 text-sm">Contribuer au développement de toute une communauté</p>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- How it Works -->
        <div class="space-y-8">
          <div>
            <h2 class="text-3xl font-bold text-[#090e15] mb-6">Comment ça Marche ?</h2>
            <div class="space-y-4">
              <div class="flex gap-4">
                <div class="flex-shrink-0">
                  <div class="flex items-center justify-center h-10 w-10 rounded-full bg-amber-600 text-white font-bold">
                    1
                  </div>
                </div>
                <div>
                  <h3 class="font-bold text-[#090e15] mb-1">Remplissez le formulaire</h3>
                  <p class="text-gray-700 text-sm">Remplissez le formulaire de parrainage avec vos informations</p>
                </div>
              </div>
              <div class="flex gap-4">
                <div class="flex-shrink-0">
                  <div class="flex items-center justify-center h-10 w-10 rounded-full bg-amber-600 text-white font-bold">
                    2
                  </div>
                </div>
                <div>
                  <h3 class="font-bold text-[#090e15] mb-1">Rencontre virtuelle</h3>
                  <p class="text-gray-700 text-sm">Nous vous contactons pour présenter un enfant correspondant à votre profil</p>
                </div>
              </div>
              <div class="flex gap-4">
                <div class="flex-shrink-0">
                  <div class="flex items-center justify-center h-10 w-10 rounded-full bg-amber-600 text-white font-bold">
                    3
                  </div>
                </div>
                <div>
                  <h3 class="font-bold text-[#090e15] mb-1">Recevez des nouvelles</h3>
                  <p class="text-gray-700 text-sm">Recevez régulièrement des nouvelles et photos de votre filleul(e)</p>
                </div>
              </div>
              <div class="flex gap-4">
                <div class="flex-shrink-0">
                  <div class="flex items-center justify-center h-10 w-10 rounded-full bg-amber-600 text-white font-bold">
                    4
                  </div>
                </div>
                <div>
                  <h3 class="font-bold text-[#090e15] mb-1">Échangez et suivez</h3>
                  <p class="text-gray-700 text-sm">Échangez et suivez l'évolution de votre filleul(e) dans son parcours</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Our Commitment Section -->
    <section class="bg-gradient-to-br from-amber-50 to-white rounded-2xl p-12 max-w-7xl mx-auto px-4 mb-20 shadow-lg border border-amber-200">
      <h2 class="text-3xl font-bold text-[#090e15] mb-12 text-center">Notre Engagement</h2>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
        <div class="bg-white rounded-xl p-8 shadow-md border-l-4 border-amber-600">
          <div class="flex items-center mb-4">
            <i class="fas fa-shield-alt text-3xl text-amber-600 mr-4"></i>
            <h3 class="text-xl font-bold text-[#090e15]">Protection Garantie</h3>
          </div>
          <p class="text-gray-700">
            Garantir la sécurité physique et émotionnelle de chaque enfant avec des protocoles stricts de protection.
          </p>
        </div>
        <div class="bg-white rounded-xl p-8 shadow-md border-l-4 border-amber-600">
          <div class="flex items-center mb-4">
            <i class="fas fa-book text-3xl text-amber-600 mr-4"></i>
            <h3 class="text-xl font-bold text-[#090e15]">Éducation de Qualité</h3>
          </div>
          <p class="text-gray-700">
            Offrir un environnement d'apprentissage stimulant, respectueux et inclusif pour chaque enfant.
          </p>
        </div>
        <div class="bg-white rounded-xl p-8 shadow-md border-l-4 border-amber-600">
          <div class="flex items-center mb-4">
            <i class="fas fa-heart text-3xl text-amber-600 mr-4"></i>
            <h3 class="text-xl font-bold text-[#090e15]">Accompagnement Humain</h3>
          </div>
          <p class="text-gray-700">
            Encourager le respect des différences et valoriser l'unicité de chaque enfant avec bienveillance.
          </p>
        </div>
      </div>
    </section>

    <!-- Sponsorship Form Section -->
    <section class="max-w-4xl mx-auto px-4 mb-20">
      <div class="bg-gradient-to-br from-slate-900 to-slate-800 rounded-2xl p-12 text-white shadow-xl border-l-4 border-amber-400">
        <h2 class="text-3xl font-bold mb-4 text-center">Devenez Parrain ou Marraine</h2>
        <p class="text-center text-gray-300 mb-8 text-lg">
          Remplissez ce formulaire pour démarrer votre aventure de parrainage
        </p>
        
        <form @submit.prevent="submitForm" class="space-y-8">
          <!-- Personal Information -->
          <div>
            <h3 class="text-xl font-bold mb-6 flex items-center gap-2">
              <i class="fas fa-user"></i>
              Informations Personnelles
            </h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <input v-model="form.nom" type="text" placeholder="Nom *" class="px-4 py-3 rounded-lg text-[#090e15] focus:outline-none focus:ring-2 focus:ring-amber-300" required />
              <input v-model="form.prenom" type="text" placeholder="Prénom *" class="px-4 py-3 rounded-lg text-[#090e15] focus:outline-none focus:ring-2 focus:ring-amber-300" required />
              <select v-model="form.sexe" class="px-4 py-3 rounded-lg text-[#090e15] focus:outline-none focus:ring-2 focus:ring-amber-300" required>
                <option value="">Sexe *</option>
                <option value="male">Homme</option>
                <option value="female">Femme</option>
              </select>
              <input v-model="form.dateNaissance" type="date" placeholder="Date de naissance *" class="px-4 py-3 rounded-lg text-[#090e15] focus:outline-none focus:ring-2 focus:ring-amber-300" required />
            </div>
          </div>

          <!-- Contact Information -->
          <div>
            <h3 class="text-xl font-bold mb-6 flex items-center gap-2">
              <i class="fas fa-envelope"></i>
              Coordonnées
            </h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <input v-model="form.email" type="email" placeholder="Email *" class="px-4 py-3 rounded-lg text-[#090e15] focus:outline-none focus:ring-2 focus:ring-amber-300" required />
              <input v-model="form.telephone" type="tel" placeholder="Téléphone *" class="px-4 py-3 rounded-lg text-[#090e15] focus:outline-none focus:ring-2 focus:ring-amber-300" required />
              <input v-model="form.adresse" type="text" placeholder="Adresse postale *" class="px-4 py-3 rounded-lg text-[#090e15] focus:outline-none focus:ring-2 focus:ring-amber-300 md:col-span-2" required />
              <input v-model="form.profession" type="text" placeholder="Profession" class="px-4 py-3 rounded-lg text-[#090e15] focus:outline-none focus:ring-2 focus:ring-amber-300 md:col-span-2" />
            </div>
          </div>

          <!-- Sponsorship Preferences -->
          <div>
            <h3 class="text-xl font-bold mb-6 flex items-center gap-2">
              <i class="fas fa-child"></i>
              Préférences de Parrainage
            </h3>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
              <select v-model="form.typeParrainage" class="px-4 py-3 rounded-lg text-[#090e15] focus:outline-none focus:ring-2 focus:ring-amber-300" required>
                <option value="">Type de parrainage *</option>
                <option value="education">Éducation</option>
                <option value="health">Santé</option>
                <option value="complete">Complet</option>
              </select>
              <input v-model="form.agePreference" type="number" placeholder="Âge préféré (5-18)" min="5" max="18" class="px-4 py-3 rounded-lg text-[#090e15] focus:outline-none focus:ring-2 focus:ring-amber-300" />
              <select v-model="form.sexePreference" class="px-4 py-3 rounded-lg text-[#090e15] focus:outline-none focus:ring-2 focus:ring-amber-300">
                <option value="">Sexe préféré</option>
                <option value="any">Indifférent</option>
                <option value="male">Garçon</option>
                <option value="female">Fille</option>
              </select>
            </div>
          </div>

          <!-- Message -->
          <div>
            <h3 class="text-xl font-bold mb-6 flex items-center gap-2">
              <i class="fas fa-comment"></i>
              Message
            </h3>
            <textarea v-model="form.message" placeholder="Message à l'équipe (optionnel)" rows="5" class="w-full px-4 py-3 rounded-lg text-[#090e15] focus:outline-none focus:ring-2 focus:ring-amber-300"></textarea>
          </div>

          <!-- Submit Button -->
          <div class="text-center">
            <button type="submit" :disabled="isSubmitting" class="px-8 py-4 bg-gradient-to-r from-white to-amber-400 text-slate-900 rounded-full font-bold text-lg hover:from-amber-50 hover:to-amber-500 transition duration-300 shadow-lg disabled:opacity-50">
              <i class="fas fa-check mr-2"></i>
              {{ isSubmitting ? 'Envoi en cours...' : 'Envoyer ma demande de parrainage' }}
            </button>
          </div>
        </form>
      </div>
    </section>

    <!-- CTA Section -->
    <section class="bg-gradient-to-r from-[#090e15] to-[#1e293b] py-16 rounded-2xl max-w-7xl mx-auto px-4 mb-20">
      <div class="text-center">
        <h2 class="text-3xl font-bold text-white mb-4">Ensemble, Changeons des Vies</h2>
        <p class="text-gray-300 mb-8 text-lg max-w-2xl mx-auto">
          Votre engagement peut transformer la vie d'un enfant. Rejoignez notre communauté de parrains et marraines dès maintenant.
        </p>
        <router-link to="/contact" class="inline-block px-8 py-4 bg-purple-600 text-white rounded-full font-bold hover:bg-purple-700 transition duration-300">
          <i class="fas fa-envelope mr-2"></i>
          Nous Contacter
        </router-link>
      </div>
    </section>
  </div>
</template>

<script setup>
import { ref } from 'vue'

const isSubmitting = ref(false)

const form = ref({
  nom: '',
  prenom: '',
  sexe: '',
  dateNaissance: '',
  email: '',
  telephone: '',
  adresse: '',
  profession: '',
  typeParrainage: '',
  agePreference: '',
  sexePreference: '',
  message: ''
})

const submitForm = async () => {
  isSubmitting.value = true
  
  try {
    // Validation des champs obligatoires
    if (!form.value.nom || !form.value.prenom || !form.value.email || !form.value.telephone) {
      alert('Veuillez remplir tous les champs obligatoires')
      isSubmitting.value = false
      return
    }

    // Préparer les données pour Formspree
    const formData = {
      'Nom': form.value.nom,
      'Prénom': form.value.prenom,
      'Sexe': form.value.sexe,
      'Date de naissance': form.value.dateNaissance,
      'Email': form.value.email,
      'Téléphone': form.value.telephone,
      'Adresse': form.value.adresse,
      'Profession': form.value.profession,
      'Type de parrainage': form.value.typeParrainage,
      'Âge préféré': form.value.agePreference || 'Non spécifié',
      'Sexe préféré': form.value.sexePreference || 'Indifférent',
      'Message': form.value.message || 'Aucun message'
    }

    // Envoyer les données à Formspree
    const response = await fetch('https://formspree.io/f/mkgbydwe', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'Accept': 'application/json'
      },
      body: JSON.stringify(formData)
    })

    if (!response.ok) {
      throw new Error('Erreur lors de l\'envoi du formulaire')
    }
    
    // Message de succès
    alert('Merci ! Votre demande de parrainage a bien été reçue. Notre équipe vous contactera bientôt.')
    
    // Réinitialiser le formulaire
    form.value = {
      nom: '',
      prenom: '',
      sexe: '',
      dateNaissance: '',
      email: '',
      telephone: '',
      adresse: '',
      profession: '',
      typeParrainage: '',
      agePreference: '',
      sexePreference: '',
      message: ''
    }
  } catch (error) {
    console.error('Erreur lors de l\'envoi:', error)
    alert('Une erreur s\'est produite lors de l\'envoi du formulaire. Veuillez réessayer ou nous contacter directement.')
  } finally {
    isSubmitting.value = false
  }
}
</script>
}
